!function(){function t(t){return new a(this,t)}var a=function(t,n){var o=this,e=null,r=null,l=null;o.el=$(t);var i=o.options=$.extend({},a.DEFAULTS,n||{}),s="div";if("img"==i.type&&("img"==i.type&&("data-lazy-path"==i.source&&(i.source="data-lazy-img"),l=i.source+"-install"),s="IMG",e=$("img["+i.source+"]["+i.source+"!=done]",o.el),r=e.length,!r))return!1;var c=function(){var t="img"==i.type?$("img["+i.source+"]["+i.source+"!=done]",o.el):o.el;r=t.length;var a=$(document).scrollTop(),n=a+$(window).height()+i.space;$.each(t,function(){var t=$(this),e=(i.source,t.offset().top);if(e>0&&r>0&&e>a-t.outerHeight()&&n>e){var l=t.attr(i.source);"img"==i.type?"done"!=l?(o.loadImg(t,l,i),r-=1):"done"==l&&(r-=1):"js"==i.type?o.loadJs(t,l,function(){r-=1}):"fn"==i.type&&o.loadFn(t,i,function(){r-=1})}}),r||("img"==i.type&&l&&o.el.removeAttr(l),$(window).unbind("scroll",u),$(window).unbind("resize",u))},d=setTimeout(c,0),u=function(){d&&clearTimeout(d),d=setTimeout(c,i.delay)};"img"==i.type&&"1"!=o.el.attr(l)&&o.el.attr(l,1),"fn"==i.type&&o.el.attr("data-lazyload-fn","0"),"js"==i.type&&o.el.attr("data-lazyload-js","0"),$(window).bind("scroll",u),$(window).bind("resize",u)};a.VERSION="1.0.0",a.DEFAULTS={type:"img",source:"data-lazy-path",delay:100,space:100,onchange:null,errorClass:"err-poster",blankImgUrl:null},a.prototype.loadImg=function(t,a,n){!t.attr("src")&&a&&t.attr("src",a),t.attr(n.source,"done"),a||t.attr("src")||t.attr("src",n.blankImgUrl),a&&(t[0].onerror=function(){t.attr("src",n.blankImgUrl).addClass(n.errorClass)}),$.isFunction(n.onchange)&&n.onchange.call(this)},a.prototype.loadFn=function(t,a,n){"0"==t.attr("data-lazyload-fn")&&(t.attr("data-lazyload-fn","done"),n(),$.isFunction(a.onchange)&&a.onchange.call(this,t))},a.prototype.loadJs=function(t,a,n){var o=this,e=o.options;a?($.ajax({url:a,dataType:"script",cache:!0,success:function(){"0"==t.attr("data-lazyload-js")&&t.attr("data-lazyload-js","done"),$.isFunction(e.onchange)&&e.onchange.call(o,t)}}),n()):$.error("ajax 路径不存在")},$.fn.lazyload=t,$.fn.lazyload.Constructor=a}(jQuery);