!function(){function t(t){return new a(this,t)}var a=function(t,e){var o=this,n=null,r=null,l=null;o.el=$(t);var s=o.options=$.extend({},a.DEFAULTS,e||{}),i="IMG";if("img"==s.type){if("img"==s.type&&("data-lazy-path"==s.source&&(s.source="data-lazy-img"),l=s.source+"-install"),i="IMG",n=$("img["+s.source+"]["+s.source+"!=done]",o.el),r=n.length,!r)return!1}else"fn"==s.type&&(i=s.source);var c=function(){var t="img"==s.type?$("img["+s.source+"]["+s.source+"!=done]",o.el):"fn"==s.type?$(i,o.el):"js"==s.type&&o.el;r=t.size();var a=$(document).scrollTop(),e=a+$(window).height()+s.space;$.each(t,function(){var t=$(this),n=null;if(("js"==s.type||"img"==s.type)&&(n=t.attr(s.source)),n||"fn"==s.type||"img"==s.type){var l=o.getTop(t);if(l>0&&r>0&&l>a-t.outerHeight()&&e>l){var i;"img"==s.type?(i=t.attr(s.source),"done"!=i?(o.loadImg(t,i,s),r-=1):"done"==i&&(r-=1)):"js"==s.type?o.loadJs(t,n,function(){r-=1}):"fn"==s.type&&o.loadFn(t,s,function(){r-=1})}}}),r||("img"==s.type&&l&&o.el.removeAttr(l),$(window).unbind("scroll",u),$(window).unbind("resize",u))},d=setTimeout(c,0),u=function(){d&&clearTimeout(d),d=setTimeout(c,s.delay)};"img"==s.type&&"1"!=o.el.attr(l)&&o.el.attr(l,1),"fn"==s.type&&s.source.attr("data-lazyload-fn","0"),"js"==s.type&&o.el.attr("data-lazyload-js","0"),$(window).bind("scroll",u),$(window).bind("resize",u)};a.DEFAULTS={type:"img",source:"data-lazy-path",init:"data-lazy-init",delay:100,space:100,onchange:null,placeholderClass:"loading-style",errorClass:"err-poster",blankImgUrl:"../../images/share/bank.gif"},a.prototype.loadImg=function(t,a,e){!t.attr("src")&&a&&t.attr("src",a),t.attr(e.source,"done"),a||t.attr("src")||t.attr("src",e.blankImgUrl),a&&(t[0].onerror=function(){t.attr("src",e.blankImgUrl).removeClass(e.placeholderClass).addClass(e.errorClass)},t[0].onload=function(){t.removeClass(e.placeholderClass)}),$.isFunction(e.onchange)&&e.onchange.call(this)},a.prototype.loadFn=function(t,a,e){"0"==t.attr("data-lazyload-fn")&&(t.attr("data-lazyload-fn","done"),e(),a.onchange&&a.onchange(t))},a.prototype.loadJs=function(t,a,e){var o=this,n=o.options;a?($.ajax({url:a,dataType:"script",cache:!0,success:function(){"0"==t.attr("data-lazyload-js")&&t.attr("data-lazyload-js","done"),$.isFunction(n.onchange)&&n.onchange.call()}}),e()):$.error("ajax 路径不存在")},a.prototype.getTop=function(t){return t.offset().top},$.fn.lazyload=t,$.fn.lazyload.Constructor=a}(jQuery);